# PageWrightCloud Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# INFRASTRUCTURE
# =============================================================================

# PostgreSQL (Gateway Database)
POSTGRES_DB=pagewright
POSTGRES_USER=pagewright
POSTGRES_PASSWORD=pagewright

# Redis (Manager Queue)
PAGEWRIGHT_REDIS_ADDR=redis:6379
PAGEWRIGHT_REDIS_PASSWORD=
PAGEWRIGHT_REDIS_DB=0

# NFS (Storage Backend)
PAGEWRIGHT_NFS_BASE_PATH=/nfs

# =============================================================================
# GATEWAY SERVICE (Port 8085)
# =============================================================================

PAGEWRIGHT_GATEWAY_PORT=8085
PAGEWRIGHT_DATABASE_URL=postgres://pagewright:pagewright@postgres:5432/pagewright?sslmode=disable
PAGEWRIGHT_JWT_SECRET=dev-secret-change-in-production
PAGEWRIGHT_JWT_EXPIRATION=15m
PAGEWRIGHT_DEFAULT_PAGE_SIZE=25

# Google OAuth (Required for OAuth login)
PAGEWRIGHT_GOOGLE_CLIENT_ID=your-google-client-id
PAGEWRIGHT_GOOGLE_CLIENT_SECRET=your-google-client-secret
PAGEWRIGHT_GOOGLE_REDIRECT_URL=http://localhost:8085/auth/google/callback

# LLM Configuration (Required for chat-based builds)
PAGEWRIGHT_LLM_KEY=sk-your-openai-api-key
PAGEWRIGHT_LLM_URL=https://api.openai.com/v1

# Service URLs (Gateway)
PAGEWRIGHT_STORAGE_URL=http://storage:8080
PAGEWRIGHT_MANAGER_URL=http://manager:8081
PAGEWRIGHT_SERVING_URL=http://serving:8083

# =============================================================================
# MANAGER SERVICE (Port 8081)
# =============================================================================

PAGEWRIGHT_MANAGER_PORT=8081
PAGEWRIGHT_QUEUE_BACKEND=redis
PAGEWRIGHT_WORKER_SPAWNER=docker
PAGEWRIGHT_LOCK_TTL=5m
PAGEWRIGHT_LOCK_RENEW_INTERVAL=1m
PAGEWRIGHT_WORKER_IMAGE=pagewright-worker:latest
PAGEWRIGHT_WORKER_TIMEOUT=30m

# =============================================================================
# STORAGE SERVICE (Port 8080)
# =============================================================================

PAGEWRIGHT_STORAGE_PORT=8080
PAGEWRIGHT_STORAGE_BACKEND=nfs

# =============================================================================
# SERVING SERVICE (Port 8083)
# =============================================================================

PAGEWRIGHT_SERVING_PORT=8083
PAGEWRIGHT_WWW_ROOT=/var/www
PAGEWRIGHT_NGINX_SITES_ENABLED=/etc/nginx/sites-enabled
PAGEWRIGHT_NGINX_RELOAD_COMMAND=nginx -s reload
PAGEWRIGHT_MAX_VERSIONS_PER_SITE=10
PAGEWRIGHT_MAINTENANCE_PAGE_PATH=/etc/pagewright/503.html

# Nginx Port
PAGEWRIGHT_NGINX_PORT=8084

# =============================================================================
# UI SERVICE (Port 3000)
# =============================================================================

PAGEWRIGHT_UI_PORT=3000
VITE_API_URL=http://localhost:8085
VITE_WS_URL=ws://localhost:8085/ws
VITE_DEFAULT_DOMAIN=pagewright.dev

# =============================================================================
# THEMES SERVICE (Port 8086)
# =============================================================================

PAGEWRIGHT_THEMES_PORT=8086

# =============================================================================
# WORKER SERVICE (Port 8082) - Optional, spawned by manager
# =============================================================================

PAGEWRIGHT_WORKER_PORT=8082
PAGEWRIGHT_WORK_DIR=/work
PAGEWRIGHT_CODEX_BINARY=/usr/local/bin/codex
PAGEWRIGHT_INSTRUCTIONS_PATH=/.codex/instructions.md
PAGEWRIGHT_JOB={}

# Worker ID and Job (Set by manager at runtime)
# PAGEWRIGHT_WORKER_ID=
# PAGEWRIGHT_JOB=
